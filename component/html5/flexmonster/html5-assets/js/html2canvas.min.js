(function(X,Z,Y){"use strict";var J={},t2,I1,w2;J.Util={};J.Util.log=function(g){if(J.logging&&X.console&&X.console.log){X.console.log(g);}};J.Util.trimText=(function(h){return function(g){return h?h.apply(g):((g||'')+'').replace(/^\s+|\s+$/g,'');};})(String.prototype.trim);J.Util.asFloat=function(g){return parseFloat(g);};(function(){var l=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,m=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;J.Util.parseTextShadows=function(g){if(!g||g==='none'){return [];}var h=g.match(l),i=[];for(var j=0;h&&(j<h.length);j++){var k=h[j].match(m);i.push({color:k[0],offsetX:k[1]?k[1].replace('px',''):0,offsetY:k[2]?k[2].replace('px',''):0,blur:k[3]?k[3].replace('px',''):0});}return i;};})();J.Util.parseBackgroundImage=function(g){var h=' \r\n\t',i,j,k,l,m,o=[],p,r=0,s=0,C,t,F=function(){if(i){if(j.substr(0,1)==='"'){j=j.substr(1,j.length-2);}if(j){t.push(j);}if(i.substr(0,1)==='-'&&(l=i.indexOf('-',1)+1)>0){k=i.substr(0,l);i=i.substr(l);}o.push({prefix:k,method:i.toLowerCase(),value:m,args:t});}t=[];i=k=j=m='';};F();for(var v=0,G=g.length;v<G;v++){p=g[v];if(r===0&&h.indexOf(p)>-1){continue;}switch(p){case '"':if(!C){C=p;}else if(C===p){C=null;}break;case '(':if(C){break;}else if(r===0){r=1;m+=p;continue;}else{s++;}break;case ')':if(C){break;}else if(r===1){if(s===0){r=0;m+=p;F();continue;}else{s--;}}break;case ',':if(C){break;}else if(r===0){F();continue;}else if(r===1){if(s===0&&!i.match(/^url$/i)){t.push(j);j='';m+=p;continue;}}break;}m+=p;if(r===0){i+=p;}else{j+=p;}}F();return o;};J.Util.Bounds=function(g){var h,i={};if(g.getBoundingClientRect){h=g.getBoundingClientRect();i.top=h.top;i.bottom=h.bottom||(h.top+h.height);i.left=h.left;i.width=g.offsetWidth;i.height=g.offsetHeight;}return i;};J.Util.OffsetBounds=function(g){var h=g.offsetParent?J.Util.OffsetBounds(g.offsetParent):{top:0,left:0};return {top:g.offsetTop+h.top,bottom:g.offsetTop+g.offsetHeight+h.top,left:g.offsetLeft+h.left,width:g.offsetWidth,height:g.offsetHeight};};function H1(g,h,i){var j=g.runtimeStyle&&g.runtimeStyle[h],k,l=g.style;if(!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(i)&&/^-?\d/.test(i)){k=l.left;if(j){g.runtimeStyle.left=g.currentStyle.left;}l.left=h==="fontSize"?"1em":(i||0);i=l.pixelLeft+"px";l.left=k;if(j){g.runtimeStyle.left=j;}}if(!/^(thin|medium|thick)$/i.test(i)){return Math.round(parseFloat(i))+"px";}return i;}function p2(g){return parseInt(g,10);}function M0(g){return g.toString().indexOf("%")!==-1;}function r2(g,h,i,j){g=(g||'').split(',');g=g[j||0]||g[0]||'auto';g=J.Util.trimText(g).split(' ');if(i==='backgroundSize'&&(g[0]&&g[0].match(/^(cover|contain|auto)$/))){return g;}else{g[0]=(g[0].indexOf("%")===-1)?H1(h,i+"X",g[0]):g[0];if(g[1]===Y){if(i==='backgroundSize'){g[1]='auto';return g;}else{g[1]=g[0];}}g[1]=(g[1].indexOf("%")===-1)?H1(h,i+"Y",g[1]):g[1];}return g;}J.Util.getCSS=function(g,h,i){if(t2!==g){I1=Z.defaultView.getComputedStyle(g,null);}var j=I1[h];if(/^background(Size|Position)$/.test(h)){return r2(j,g,h,i);}else if(/border(Top|Bottom)(Left|Right)Radius/.test(h)){var k=j.split(" ");if(k.length<=1){k[1]=k[0];}return k.map(p2);}return j;};J.Util.resizeBounds=function(g,h,i,j,k){var l=i/j,m=g/h,o,p;if(!k||k==='auto'){o=i;p=j;}else if(l<m^k==='contain'){p=j;o=j*m;}else{o=i;p=i/m;}return {width:o,height:p};};J.Util.BackgroundPosition=function(g,h,i,j,k){var l=J.Util.getCSS(g,'backgroundPosition',j),m,o;if(l.length===1){l=[l[0],l[0]];}if(M0(l[0])){m=(h.width-(k||i).width)*(parseFloat(l[0])/100);}else{m=parseInt(l[0],10);}if(l[1]==='auto'){o=m/i.width*i.height;}else if(M0(l[1])){o=(h.height-(k||i).height)*parseFloat(l[1])/100;}else{o=parseInt(l[1],10);}if(l[0]==='auto'){m=o/i.height*i.width;}return {left:m,top:o};};J.Util.BackgroundSize=function(g,h,i,j){var k=J.Util.getCSS(g,'backgroundSize',j),l,m;if(k.length===1){k=[k[0],k[0]];}if(M0(k[0])){l=h.width*parseFloat(k[0])/100;}else if(/contain|cover/.test(k[0])){return J.Util.resizeBounds(i.width,i.height,h.width,h.height,k[0]);}else{l=parseInt(k[0],10);}if(k[0]==='auto'&&k[1]==='auto'){m=i.height;}else if(k[1]==='auto'){m=l/i.width*i.height;}else if(M0(k[1])){m=h.height*parseFloat(k[1])/100;}else{m=parseInt(k[1],10);}if(k[0]==='auto'){l=m/i.height*i.width;}return {width:l,height:m};};J.Util.BackgroundRepeat=function(g,h){var i=J.Util.getCSS(g,"backgroundRepeat").split(",").map(J.Util.trimText);return i[h]||i[0];};J.Util.Extend=function(g,h){for(var i in g){if(g.hasOwnProperty(i)){h[i]=g[i];}}return h;};J.Util.Children=function(o){var p;try{p=(o.nodeName&&o.nodeName.toUpperCase()==="IFRAME")?o.contentDocument||o.contentWindow.document:(function(l){var m=[];if(l!==null){(function(g,h){var i=g.length,j=0;if(typeof h.length==="number"){for(var k=h.length;j<k;j++){g[i++]=h[j];}}else{while(h[j]!==Y){g[i++]=h[j++];}}g.length=i;return g;})(m,l);}return m;})(o.childNodes);}catch(g){J.Util.log("html2canvas.Util.Children failed with exception: "+g.message);p=[];}return p;};J.Util.isTransparent=function(g){return (!g||g==="transparent"||g==="rgba(0, 0, 0, 0)");};J.Util.Font=(function(){var s={};return function(g,h,i){if(s[g+"-"+h]!==Y){return s[g+"-"+h];}var j=i.createElement('div'),k=i.createElement('img'),l=i.createElement('span'),m='Hidden Text',o,p,r;j.style.visibility="hidden";j.style.fontFamily=g;j.style.fontSize=h;j.style.margin=0;j.style.padding=0;i.body.appendChild(j);k.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=";k.width=1;k.height=1;k.style.margin=0;k.style.padding=0;k.style.verticalAlign="baseline";l.style.fontFamily=g;l.style.fontSize=h;l.style.margin=0;l.style.padding=0;l.appendChild(i.createTextNode(m));j.appendChild(l);j.appendChild(k);o=(k.offsetTop-l.offsetTop)+1;j.removeChild(l);j.appendChild(i.createTextNode(m));j.style.lineHeight="normal";k.style.verticalAlign="super";p=(k.offsetTop-j.offsetTop)+1;r={baseline:o,lineWidth:1,middle:p};s[g+"-"+h]=r;i.body.removeChild(j);return r;};})();(function(){var G=J.Util,M={};J.Generate=M;var N=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];M.parseGradient=function(g,h){var i,j,k=N.length,l,m,o,p,r,s,C,t,F,v;for(j=0;j<k;j+=1){l=g.match(N[j]);if(l){break;}}if(l){switch(l[1]){case '-webkit-linear-gradient':case '-o-linear-gradient':i={type:'linear',x0:null,y0:null,x1:null,y1:null,colorStops:[]};o=l[2].match(/\w+/g);if(o){p=o.length;for(j=0;j<p;j+=1){switch(o[j]){case 'top':i.y0=0;i.y1=h.height;break;case 'right':i.x0=h.width;i.x1=0;break;case 'bottom':i.y0=h.height;i.y1=0;break;case 'left':i.x0=0;i.x1=h.width;break;}}}if(i.x0===null&&i.x1===null){i.x0=i.x1=h.width/2;}if(i.y0===null&&i.y1===null){i.y0=i.y1=h.height/2;}o=l[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g);if(o){p=o.length;r=1/Math.max(p-1,1);for(j=0;j<p;j+=1){s=o[j].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/);if(s[2]){m=parseFloat(s[2]);if(s[3]==='%'){m/=100;}else{m/=h.width;}}else{m=j*r;}i.colorStops.push({color:s[1],stop:m});}}break;case '-webkit-gradient':i={type:l[2]==='radial'?'circle':l[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]};o=l[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/);if(o){i.x0=(o[1]*h.width)/100;i.y0=(o[2]*h.height)/100;i.x1=(o[3]*h.width)/100;i.y1=(o[4]*h.height)/100;}o=l[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g);if(o){p=o.length;for(j=0;j<p;j+=1){s=o[j].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/);m=parseFloat(s[2]);if(s[1]==='from'){m=0.0;}if(s[1]==='to'){m=1.0;}i.colorStops.push({color:s[3],stop:m});}}break;case '-moz-linear-gradient':i={type:'linear',x0:0,y0:0,x1:0,y1:0,colorStops:[]};o=l[2].match(/(\d{1,3})%?\s(\d{1,3})%?/);if(o){i.x0=(o[1]*h.width)/100;i.y0=(o[2]*h.height)/100;i.x1=h.width-i.x0;i.y1=h.height-i.y0;}o=l[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g);if(o){p=o.length;r=1/Math.max(p-1,1);for(j=0;j<p;j+=1){s=o[j].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/);if(s[2]){m=parseFloat(s[2]);if(s[3]){m/=100;}}else{m=j*r;}i.colorStops.push({color:s[1],stop:m});}}break;case '-webkit-radial-gradient':case '-moz-radial-gradient':case '-o-radial-gradient':i={type:'circle',x0:0,y0:0,x1:h.width,y1:h.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]};o=l[2].match(/(\d{1,3})%?\s(\d{1,3})%?/);if(o){i.cx=(o[1]*h.width)/100;i.cy=(o[2]*h.height)/100;}o=l[3].match(/\w+/);s=l[4].match(/[a-z\-]*/);if(o&&s){switch(s[0]){case 'farthest-corner':case 'cover':case '':C=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.cy,2));t=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.y1-i.cy,2));F=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.y1-i.cy,2));v=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.cy,2));i.rx=i.ry=Math.max(C,t,F,v);break;case 'closest-corner':C=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.cy,2));t=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.y1-i.cy,2));F=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.y1-i.cy,2));v=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.cy,2));i.rx=i.ry=Math.min(C,t,F,v);break;case 'farthest-side':if(o[0]==='circle'){i.rx=i.ry=Math.max(i.cx,i.cy,i.x1-i.cx,i.y1-i.cy);}else{i.type=o[0];i.rx=Math.max(i.cx,i.x1-i.cx);i.ry=Math.max(i.cy,i.y1-i.cy);}break;case 'closest-side':case 'contain':if(o[0]==='circle'){i.rx=i.ry=Math.min(i.cx,i.cy,i.x1-i.cx,i.y1-i.cy);}else{i.type=o[0];i.rx=Math.min(i.cx,i.x1-i.cx);i.ry=Math.min(i.cy,i.y1-i.cy);}break;}}o=l[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g);if(o){p=o.length;r=1/Math.max(p-1,1);for(j=0;j<p;j+=1){s=o[j].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/);if(s[2]){m=parseFloat(s[2]);if(s[3]==='%'){m/=100;}else{m/=h.width;}}else{m=j*r;}i.colorStops.push({color:s[1],stop:m});}}break;}}return i;};function Q(i){return function(h){try{i.addColorStop(h.stop,h.color);}catch(g){G.log(['failed to add color stop: ',g,'; tried to add: ',h]);}};}M.Gradient=function(g,h){if(h.width===0||h.height===0){return ;}var i=Z.createElement('canvas'),j=i.getContext('2d'),k,l;i.width=h.width;i.height=h.height;k=J.Generate.parseGradient(g,h);if(k){switch(k.type){case 'linear':l=j.createLinearGradient(k.x0,k.y0,k.x1,k.y1);k.colorStops.forEach(Q(l));j.fillStyle=l;j.fillRect(0,0,h.width,h.height);break;case 'circle':l=j.createRadialGradient(k.cx,k.cy,0,k.cx,k.cy,k.rx);k.colorStops.forEach(Q(l));j.fillStyle=l;j.fillRect(0,0,h.width,h.height);break;case 'ellipse':var m=Z.createElement('canvas'),o=m.getContext('2d'),p=Math.max(k.rx,k.ry),r=p*2;m.width=m.height=r;l=o.createRadialGradient(k.rx,k.ry,0,k.rx,k.ry,p);k.colorStops.forEach(Q(l));o.fillStyle=l;o.fillRect(0,0,r,r);j.fillStyle=k.colorStops[k.colorStops.length-1].color;j.fillRect(0,0,i.width,i.height);j.drawImage(m,k.cx-k.rx,k.cy-k.ry,2*k.rx,2*k.ry);break;}}return i;};M.ListAlpha=function(g){var h="",i;do {i=g%26;h=String.fromCharCode((i)+64)+h;g=g/26;}while((g*26)>26);return h;};M.ListRoman=function(g){var h=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],i=[1000,900,500,400,100,90,50,40,10,9,5,4,1],j="",k,l=h.length;if(g<=0||g>=4000){return g;}for(k=0;k<l;k+=1){while(g>=i[k]){g-=i[k];j+=h[k];}}return j;};})();function q2(i,j){var k=[];return {storage:k,width:i,height:j,clip:function(){k.push({type:"function",name:"clip",'arguments':arguments});},translate:function(){k.push({type:"function",name:"translate",'arguments':arguments});},fill:function(){k.push({type:"function",name:"fill",'arguments':arguments});},save:function(){k.push({type:"function",name:"save",'arguments':arguments});},restore:function(){k.push({type:"function",name:"restore",'arguments':arguments});},fillRect:function(){k.push({type:"function",name:"fillRect",'arguments':arguments});},createPattern:function(){k.push({type:"function",name:"createPattern",'arguments':arguments});},drawShape:function(){var g=[];k.push({type:"function",name:"drawShape",'arguments':g});return {moveTo:function(){g.push({name:"moveTo",'arguments':arguments});},lineTo:function(){g.push({name:"lineTo",'arguments':arguments});},arcTo:function(){g.push({name:"arcTo",'arguments':arguments});},bezierCurveTo:function(){g.push({name:"bezierCurveTo",'arguments':arguments});},quadraticCurveTo:function(){g.push({name:"quadraticCurveTo",'arguments':arguments});}};},drawImage:function(){k.push({type:"function",name:"drawImage",'arguments':arguments});},fillText:function(){k.push({type:"function",name:"fillText",'arguments':arguments});},setVariable:function(g,h){k.push({type:"variable",name:g,'arguments':h});return h;}};}J.Parse=function(O,T,K){X.scroll(0,0);var B=((T.elements===Y)?Z.body:T.elements[0]),w=0,R=B.ownerDocument,I=J.Util,f0=I.Support(T,R),g0=new RegExp("("+T.ignoreElements+")"),H=R.body,L=I.getCSS,d0="___html2canvas___pseudoelement",U=R.createElement('style');U.innerHTML='.'+d0+'-parent:before { content: "" !important; display: none !important; }'+'.'+d0+'-parent:after { content: "" !important; display: none !important; }';H.appendChild(U);O=O||{};u0();function u0(){var g=L(Z.documentElement,"backgroundColor"),h=(I.isTransparent(g)&&B===Z.body),i=F1(B,null,false,h);N0(B);D1(B,i,function(){if(h){g=i.backgroundColor;}S0();I.log('Done parsing, moving to Render.');K({backgroundColor:g,stack:i});});}function N0(p){var r=[],s=[];C();t(p);v();function C(){var h=/:before|:after/,i=Z.styleSheets;for(var j=0,k=i.length;j<k;j++){try{var l=i[j].cssRules;for(var m=0,o=l.length;m<o;m++){if(h.test(l[m].selectorText)){s.push(l[m].selectorText);}}}catch(g){}}for(j=0,k=s.length;j<k;j++){s[j]=s[j].match(/(^[^:]*)/)[1];}}function t(g){var h=/^\s*$/,i=[];for(var j=0;j<s.length;j++){if(!h.test(s[j])){i.push(s[j]);}}if(i.length===0)return ;var k=Z.querySelectorAll(i.join(','));for(var j=0,l=k.length;j<l;j++){F(k[j]);}}function F(g){var h=A1(g,':before'),i=A1(g,':after');if(h){r.push({type:'before',pseudo:h,el:g});}if(i){r.push({type:'after',pseudo:i,el:g});}}function v(){r.forEach(function(g){R0(g.el,d0+"-parent");});r.forEach(function(g){if(g.type==='before'){g.el.insertBefore(g.pseudo,g.el.firstChild);}else{g.el.appendChild(g.pseudo);}});}}function S0(){H.removeChild(U);var g=Z.getElementsByClassName(d0+"-element");while(g.length){g[0].parentNode.removeChild(g[0]);}var h=Z.getElementsByClassName(d0+"-parent");while(h.length){T0(h[0],d0+"-parent");}}function R0(g,h){if(g.classList){g.classList.add(h);}else{g.className=g.className+" "+h;}}function T0(g,h){if(g.classList){g.classList.remove(h);}else{g.className=g.className.replace(h,"").trim();}}function v0(g,h){return g.className.indexOf(h)>-1;}function s1(g){return Array.prototype.slice.call(g);}function W0(){return Math.max(Math.max(R.body.scrollWidth,R.documentElement.scrollWidth),Math.max(R.body.offsetWidth,R.documentElement.offsetWidth),Math.max(R.body.clientWidth,R.documentElement.clientWidth));}function X0(){return Math.max(Math.max(R.body.scrollHeight,R.documentElement.scrollHeight),Math.max(R.body.offsetHeight,R.documentElement.offsetHeight),Math.max(R.body.clientHeight,R.documentElement.clientHeight));}function o0(g,h){var i=parseInt(L(g,h),10);return (isNaN(i))?0:i;}function i0(g,h,i,j,k,l){if(l!=="transparent"){g.setVariable("fillStyle",l);g.fillRect(h,i,j,k);w+=1;}}function V0(g,h,i){if(g.length>0){return h+i.toUpperCase();}}function a1(g,h){switch(h){case "lowercase":return g.toLowerCase();case "capitalize":return g.replace(/(^|\s|:|-|\(|\))([a-z])/g,V0);case "uppercase":return g.toUpperCase();default:return g;}}function u1(g){return (/^(normal|none|0px)$/.test(g));}function z0(g,h,i,j){if(g!==null&&I.trimText(g).length>0){j.fillText(g,h,i);w+=1;}}function w0(g,h,i,j){var k=false,l=L(h,"fontWeight"),m=L(h,"fontFamily"),o=L(h,"fontSize"),p=I.parseTextShadows(L(h,"textShadow"));switch(parseInt(l,10)){case 401:l="bold";break;case 400:l="normal";break;}g.setVariable("fillStyle",j);g.setVariable("font",[L(h,"fontStyle"),L(h,"fontVariant"),l,o,m].join(" "));g.setVariable("textAlign",(k)?"right":"left");if(p.length){g.setVariable("shadowColor",p[0].color);g.setVariable("shadowOffsetX",p[0].offsetX);g.setVariable("shadowOffsetY",p[0].offsetY);g.setVariable("shadowBlur",p[0].blur);}if(i!=="none"){return I.Font(m,o,R);}}function Y0(g,h,i,j,k){switch(h){case "underline":i0(g,i.left,Math.round(i.top+j.baseline+j.lineWidth),i.width,1,k);break;case "overline":i0(g,i.left,Math.round(i.top),i.width,1,k);break;case "line-through":i0(g,i.left,Math.ceil(i.top+j.middle+j.lineWidth),i.width,1,k);break;}}function f1(g,h,i,j,k){var l;if(f0.rangeBounds&&!k){if(i!=="none"||I.trimText(h).length!==0){l=A0(h,g.node,g.textOffset);}g.textOffset+=h.length;}else if(g.node&&typeof g.node.nodeValue==="string"){var m=(j)?g.node.splitText(h.length):null;l=d1(g.node,k);g.node=m;}return l;}function A0(g,h,i){var j=R.createRange();j.setStart(h,i);j.setEnd(h,i+g.length);return j.getBoundingClientRect();}function d1(g,h){var i=g.parentNode,j=R.createElement('wrapper'),k=g.cloneNode(true);j.appendChild(g.cloneNode(true));i.replaceChild(j,g);var l=h?I.OffsetBounds(j):I.Bounds(j);i.replaceChild(k,j);return l;}function p0(j,k,l){var m=l.ctx,o=L(j,"color"),p=L(j,"textDecoration"),r=L(j,"textAlign"),s,C,t={node:k,textOffset:0};if(I.trimText(k.nodeValue).length>0){k.nodeValue=a1(k.nodeValue,L(j,"textTransform"));r=r.replace(["-webkit-auto"],["auto"]);C=(!T.letterRendering&&/^(left|right|justify|auto)$/.test(r)&&u1(L(j,"letterSpacing")))?k.nodeValue.split(/(\b| )/):k.nodeValue.split("");s=w0(m,j,p,o);if(T.chinese){C.forEach(function(g,h){if(/.*[\u4E00-\u9FA5].*$/.test(g)){g=g.split("");g.unshift(h,1);C.splice.apply(C,g);}});}C.forEach(function(g,h){var i=f1(t,g,p,(h<C.length-1),l.transform.matrix);if(i){z0(g,i.left,i.bottom,m);Y0(m,p,i,s,o);}});}}function k1(g,h){var i=R.createElement("boundelement"),j,k;i.style.display="inline";j=g.style.listStyleType;g.style.listStyleType="none";i.appendChild(R.createTextNode(h));g.insertBefore(i,g.firstChild);k=I.Bounds(i);g.removeChild(i);g.style.listStyleType=j;return k;}function C0(g){var h=-1,i=1,j=g.parentNode.childNodes;if(g.parentNode){while(j[++h]!==g){if(j[h].nodeType===1){i++;}}return i;}else{return -1;}}function s0(g,h){var i=C0(g),j;switch(h){case "decimal":j=i;break;case "decimal-leading-zero":j=(i.toString().length===1)?i="0"+i.toString():i.toString();break;case "upper-roman":j=J.Generate.ListRoman(i);break;case "lower-roman":j=J.Generate.ListRoman(i).toLowerCase();break;case "lower-alpha":j=J.Generate.ListAlpha(i).toLowerCase();break;case "upper-alpha":j=J.Generate.ListAlpha(i);break;}return j+". ";}function m1(g,h,i){var j,k,l=h.ctx,m=L(g,"listStyleType"),o;if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(m)){k=s0(g,m);o=k1(g,k);w0(l,g,"none",L(g,"color"));if(L(g,"listStylePosition")==="inside"){l.setVariable("textAlign","left");j=i.left;}else{return ;}z0(k,j,o.bottom,l);}}function G0(g){var h=O[g];return (h&&h.succeeded===true)?h.img:false;}function D0(g,h){var i=Math.max(g.left,h.left),j=Math.max(g.top,h.top),k=Math.min((g.left+g.width),(h.left+h.width)),l=Math.min((g.top+g.height),(h.top+h.height));return {left:i,top:j,width:k-i,height:l-j};}function k0(g,h,i){var j,k=h.cssPosition!=='static',l=k?L(g,'zIndex'):'auto',m=L(g,'opacity'),o=L(g,'cssFloat')!=='none';h.zIndex=j=w1(l);j.isPositioned=k;j.isFloated=o;j.opacity=m;j.ownStacking=(l!=='auto'||m<1);j.depth=i?(i.zIndex.depth+1):0;if(i){i.zIndex.children.push(h);}}function w1(g){return {depth:0,zindex:g,children:[]};}function v1(g,h,i,j,k){var l=o0(h,'paddingLeft'),m=o0(h,'paddingTop'),o=o0(h,'paddingRight'),p=o0(h,'paddingBottom');z1(g,i,0,0,i.width,i.height,j.left+l+k[3].width,j.top+m+k[0].width,j.width-(k[1].width+k[3].width+l+o),j.height-(k[0].width+k[2].width+m+p));}function K1(h){return ["Top","Right","Bottom","Left"].map(function(g){return {width:o0(h,'border'+g+'Width'),color:L(h,'border'+g+'Color')};});}function L1(h){return ["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(g){return L(h,'border'+g+'Radius');});}function l0(g,h,i,j){var k=4*((Math.sqrt(2)-1)/3),l=(i)*k,m=(j)*k,o=g+i,p=h+j;return {topLeft:q0({x:g,y:p},{x:g,y:p-m},{x:o-l,y:h},{x:o,y:h}),topRight:q0({x:g,y:h},{x:g+l,y:h},{x:o,y:p-m},{x:o,y:p}),bottomRight:q0({x:o,y:h},{x:o,y:h+m},{x:g+l,y:p},{x:g,y:p}),bottomLeft:q0({x:o,y:p},{x:o-l,y:p},{x:g,y:h+m},{x:g,y:h})};}function q0(o,p,r,s){var C=function(g,h,i){return {x:g.x+(h.x-g.x)*i,y:g.y+(h.y-g.y)*i};};return {start:o,startControl:p,endControl:r,end:s,subdivide:function(g){var h=C(o,p,g),i=C(p,r,g),j=C(r,s,g),k=C(h,i,g),l=C(i,j,g),m=C(k,l,g);return [q0(o,h,k,m),q0(m,l,j,s)];},curveTo:function(g){g.push(["bezierCurve",p.x,p.y,r.x,r.y,s.x,s.y]);},curveToReversed:function(g){g.push(["bezierCurve",r.x,r.y,p.x,p.y,o.x,o.y]);}};}function m0(g,h,i,j,k,l,m){if(h[0]>0||h[1]>0){g.push(["line",j[0].start.x,j[0].start.y]);j[0].curveTo(g);j[1].curveTo(g);}else{g.push(["line",l,m]);}if(i[0]>0||i[1]>0){g.push(["line",k[0].start.x,k[0].start.y]);}}function I0(g,h,i,j,k,l,m){var o=[];if(h[0]>0||h[1]>0){o.push(["line",j[1].start.x,j[1].start.y]);j[1].curveTo(o);}else{o.push(["line",g.c1[0],g.c1[1]]);}if(i[0]>0||i[1]>0){o.push(["line",l[0].start.x,l[0].start.y]);l[0].curveTo(o);o.push(["line",m[0].end.x,m[0].end.y]);m[0].curveToReversed(o);}else{o.push(["line",g.c2[0],g.c2[1]]);o.push(["line",g.c3[0],g.c3[1]]);}if(h[0]>0||h[1]>0){o.push(["line",k[1].end.x,k[1].end.y]);k[1].curveToReversed(o);}else{o.push(["line",g.c4[0],g.c4[1]]);}return o;}function P1(g,h,i){var j=g.left,k=g.top,l=g.width,m=g.height,o=h[0][0],p=h[0][1],r=h[1][0],s=h[1][1],C=h[2][0],t=h[2][1],F=h[3][0],v=h[3][1],G=l-r,M=m-t,N=l-C,Q=m-v;return {topLeftOuter:l0(j,k,o,p).topLeft.subdivide(0.5),topLeftInner:l0(j+i[3].width,k+i[0].width,Math.max(0,o-i[3].width),Math.max(0,p-i[0].width)).topLeft.subdivide(0.5),topRightOuter:l0(j+G,k,r,s).topRight.subdivide(0.5),topRightInner:l0(j+Math.min(G,l+i[3].width),k+i[0].width,(G>l+i[3].width)?0:r-i[3].width,s-i[0].width).topRight.subdivide(0.5),bottomRightOuter:l0(j+N,k+M,C,t).bottomRight.subdivide(0.5),bottomRightInner:l0(j+Math.min(N,l+i[3].width),k+Math.min(M,m+i[0].width),Math.max(0,C-i[1].width),Math.max(0,t-i[2].width)).bottomRight.subdivide(0.5),bottomLeftOuter:l0(j,k+Q,F,v).bottomLeft.subdivide(0.5),bottomLeftInner:l0(j+i[3].width,k+Q,Math.max(0,F-i[3].width),Math.max(0,v-i[2].width)).bottomLeft.subdivide(0.5)};}function N1(g,h,i,j,k){var l=L(g,'backgroundClip'),m=[];switch(l){case "content-box":case "padding-box":m0(m,j[0],j[1],h.topLeftInner,h.topRightInner,k.left+i[3].width,k.top+i[0].width);m0(m,j[1],j[2],h.topRightInner,h.bottomRightInner,k.left+k.width-i[1].width,k.top+i[0].width);m0(m,j[2],j[3],h.bottomRightInner,h.bottomLeftInner,k.left+k.width-i[1].width,k.top+k.height-i[2].width);m0(m,j[3],j[0],h.bottomLeftInner,h.topLeftInner,k.left+i[3].width,k.top+k.height-i[2].width);break;default:m0(m,j[0],j[1],h.topLeftOuter,h.topRightOuter,k.left,k.top);m0(m,j[1],j[2],h.topRightOuter,h.bottomRightOuter,k.left+k.width,k.top);m0(m,j[2],j[3],h.bottomRightOuter,h.bottomLeftOuter,k.left+k.width,k.top+k.height);m0(m,j[3],j[0],h.bottomLeftOuter,h.topLeftOuter,k.left,k.top+k.height);break;}return m;}function U1(g,h,i){var j=h.left,k=h.top,l=h.width,m=h.height,o,p,r,s,C,t,F=L1(g),v=P1(h,F,i),G={clip:N1(g,v,i,F,h),borders:[]};for(o=0;o<4;o++){if(i[o].width>0){p=j;r=k;s=l;C=m-(i[2].width);switch(o){case 0:C=i[0].width;t=I0({c1:[p,r],c2:[p+s,r],c3:[p+s-i[1].width,r+C],c4:[p+i[3].width,r+C]},F[0],F[1],v.topLeftOuter,v.topLeftInner,v.topRightOuter,v.topRightInner);break;case 1:p=j+l-(i[1].width);s=i[1].width;t=I0({c1:[p+s,r],c2:[p+s,r+C+i[2].width],c3:[p,r+C],c4:[p,r+i[0].width]},F[1],F[2],v.topRightOuter,v.topRightInner,v.bottomRightOuter,v.bottomRightInner);break;case 2:r=(r+m)-(i[2].width);C=i[2].width;t=I0({c1:[p+s,r+C],c2:[p,r+C],c3:[p+i[3].width,r],c4:[p+s-i[3].width,r]},F[2],F[3],v.bottomRightOuter,v.bottomRightInner,v.bottomLeftOuter,v.bottomLeftInner);break;case 3:s=i[3].width;t=I0({c1:[p,r+C+i[2].width],c2:[p,r],c3:[p+s,r+i[0].width],c4:[p+s,r+C]},F[3],F[0],v.bottomLeftOuter,v.bottomLeftInner,v.topLeftOuter,v.topLeftInner);break;}G.borders.push({args:t,color:i[o].color});}}return G;}function p1(i,j){var k=i.drawShape();j.forEach(function(g,h){k[(h===0)?"moveTo":g[0]+"To"].apply(null,g.slice(1));});return k;}function Q1(g,h,i){if(i!=="transparent"){g.setVariable("fillStyle",i);p1(g,h);g.fill();w+=1;}}function n1(i,j,k){var l=R.createElement('valuewrap'),m=['lineHeight','textAlign','fontFamily','color','fontSize','paddingLeft','paddingTop','width','height','border','borderLeftWidth','borderTopWidth'],o,p;m.forEach(function(h){try{l.style[h]=L(i,h);}catch(g){I.log("html2canvas: Parse: Exception caught in renderFormValue: "+g.message);}});l.style.borderColor="black";l.style.borderStyle="solid";l.style.display="block";l.style.position="absolute";if(/^(submit|reset|button|text|password)$/.test(i.type)||i.nodeName==="SELECT"){l.style.lineHeight=L(i,"height");}l.style.top=j.top+"px";l.style.left=j.left+"px";o=(i.nodeName==="SELECT")?(i.options[i.selectedIndex]||0).text:i.value;if(!o){o=i.placeholder;}p=R.createTextNode(o);l.appendChild(p);H.appendChild(l);p0(i,p,k);H.removeChild(l);}function z1(g){g.drawImage.apply(g,Array.prototype.slice.call(arguments,1));w+=1;}function A1(i,j){var k=X.getComputedStyle(i,j),l=X.getComputedStyle(i);if(!k||!k.content||k.content==="none"||k.content==="-moz-alt-content"||k.display==="none"||l.content===k.content){return ;}var m=k.content+'';if(m[0]==="'"||m[0]==="\""){m=m.replace(/(^['"])|(['"]$)/g,'');}var o=m.substr(0,3)==='url',p=Z.createElement(o?'img':'span');p.className=d0+"-element ";Object.keys(k).filter(g2).forEach(function(h){try{p.style[h]=k[h];}catch(g){I.log(['Tried to assign readonly property ',h,'Error:',g]);}});if(o){p.src=I.parseBackgroundImage(m)[0].args[0];}else{p.innerHTML=m;}return p;}function g2(g){return (isNaN(X.parseInt(g,10)));}function B1(g,h,i,j){var k=Math.round(j.left+i.left),l=Math.round(j.top+i.top);g.createPattern(h);g.translate(k,l);g.fill();g.translate(-k,-l);}function r1(g,h,i,j,k,l,m,o){var p=[];p.push(["line",Math.round(k),Math.round(l)]);p.push(["line",Math.round(k+m),Math.round(l)]);p.push(["line",Math.round(k+m),Math.round(o+l)]);p.push(["line",Math.round(k),Math.round(o+l)]);p1(g,p);g.save();g.clip();B1(g,h,i,j);g.restore();}function h2(g,h,i){i0(g,h.left,h.top,h.width,h.height,i);}function V1(g,h,i,j,k){var l=I.BackgroundSize(g,h,j,k),m=I.BackgroundPosition(g,h,j,k,l),o=I.BackgroundRepeat(g,k);j=W1(j,l);switch(o){case "repeat-x":case "repeat no-repeat":r1(i,j,m,h,h.left,h.top+m.top,99999,j.height);break;case "repeat-y":case "no-repeat repeat":r1(i,j,m,h,h.left+m.left,h.top,j.width,99999);break;case "no-repeat":r1(i,j,m,h,h.left+m.left,h.top+m.top,j.width,j.height);break;default:B1(i,j,m,{top:h.top,left:h.left,width:j.width,height:j.height});break;}}function Y1(g,h,i){var j=L(g,"backgroundImage"),k=I.parseBackgroundImage(j),l,m=k.length;while(m--){j=k[m];if(!j.args||j.args.length===0){continue;}var o=j.method==='url'?j.args[0]:j.value;l=G0(o);if(l){V1(g,h,i,l,m);}else{I.log("html2canvas: Error loading background:",j);}}}function W1(g,h){if(g.width===h.width&&g.height===h.height){return g;}var i,j=R.createElement('canvas');j.width=h.width;j.height=h.height;i=j.getContext("2d");z1(i,g,0,0,g.width,g.height,0,0,h.width,h.height);return j;}function a2(g,h,i){return g.setVariable("globalAlpha",L(h,"opacity")*((i)?i.opacity:1));}function Z1(g){return g.replace("px","");}function f2(g,h){var i=/(matrix)\((.+)\)/,j=L(g,"transform")||L(g,"-webkit-transform")||L(g,"-moz-transform")||L(g,"-ms-transform")||L(g,"-o-transform"),k=L(g,"transform-origin")||L(g,"-webkit-transform-origin")||L(g,"-moz-transform-origin")||L(g,"-ms-transform-origin")||L(g,"-o-transform-origin")||"0px 0px";k=k.split(" ").map(Z1).map(I.asFloat);var l;if(j&&j!=="none"){var m=j.match(i);if(m){switch(m[1]){case "matrix":l=m[2].split(",").map(I.trimText).map(I.asFloat);break;}}}return {origin:k,matrix:l};}function k2(g,h,i,j){var k=q2((!h)?W0():i.width,(!h)?X0():i.height),l={ctx:k,opacity:a2(k,g,h),cssPosition:L(g,"position"),borders:K1(g),transform:j,clip:(h&&h.clip)?I.Extend({},h.clip):null};k0(g,l,h);if(T.useOverflow===true&&/(hidden|scroll|auto)/.test(L(g,"overflow"))===true&&/(BODY)/i.test(g.nodeName)===false){l.clip=(l.clip)?D0(l.clip,i):i;}return l;}function l2(g,h,i){var j={left:h.left+g[3].width,top:h.top+g[0].width,width:h.width-(g[1].width+g[3].width),height:h.height-(g[0].width+g[2].width)};if(i){j=D0(j,i);}return j;}function m2(g,h){var i=(h.matrix)?I.OffsetBounds(g):I.Bounds(g);h.origin[0]+=i.left;h.origin[1]+=i.top;return i;}function F1(h,i,j){var k=f2(h,i),l=m2(h,k),m,o=k2(h,i,l,k),p=o.borders,r=o.ctx,s=l2(p,l,o.clip),C=U1(h,l,p),t=(g0.test(h.nodeName))?"#efefef":L(h,"backgroundColor");p1(r,C.clip);r.save();r.clip();if(s.height>0&&s.width>0&&!j){h2(r,l,t);Y1(h,s,r);}else if(j){o.backgroundColor=t;}r.restore();C.borders.forEach(function(g){Q1(r,g.args,g.color);});switch(h.nodeName){case "IMG":if((m=G0(h.getAttribute('src')))){v1(r,h,m,l,p);}else{I.log("html2canvas: Error loading <img>:"+h.getAttribute('src'));}break;case "INPUT":if(/^(text|url|email|submit|button|reset)$/.test(h.type)&&(h.value||h.placeholder||"").length>0){n1(h,l,o);}break;case "TEXTAREA":if((h.value||h.placeholder||"").length>0){n1(h,l,o);}break;case "SELECT":if((h.options||h.placeholder||"").length>0){n1(h,l,o);}break;case "LI":m1(h,o,s);break;case "CANVAS":v1(r,h,h,l,p);break;}return o;}function i2(g){return (L(g,'display')!=="none"&&L(g,'visibility')!=="hidden"&&!g.hasAttribute("data-html2canvas-ignore"));}function j2(g,h,i){if(!i){i=function(){};}if(i2(g)){h=F1(g,h,false)||h;if(!g0.test(g.nodeName)){return D1(g,h,i);}}i();}function D1(h,i,j){var k=I.Children(h),l=k.length+1;o();if(T.async){k.forEach(function(g){setTimeout(function(){m(g);},0);});}else{k.forEach(m);}function m(g){if(g.nodeType===g.ELEMENT_NODE){j2(g,i,o);}else if(g.nodeType===g.TEXT_NODE){p0(h,g,i);o();}else{o();}}function o(g){if(--l<=0){I.log("finished rendering "+k.length+" children.");j();}}}};J.Preload=function(p){var r={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:false},s,C=J.Util,t,F,v=0,G=p.elements[0]||Z.body,M=G.ownerDocument,N=G.getElementsByTagName('img'),Q=N.length,O=M.createElement("a"),T=(function(g){return (g.crossOrigin!==Y);})(new Image()),K;O.href=X.location.href;s=O.protocol+O.host;function B(g){O.href=g;O.href=O.href;var h=O.protocol+O.host;return (h===s);}function w(){C.log("html2canvas: start: images: "+r.numLoaded+" / "+r.numTotal+" (failed: "+r.numFailed+")");if(!r.firstRun&&r.numLoaded>=r.numTotal){C.log("Finished loading images: # "+r.numTotal+" (failed: "+r.numFailed+")");if(typeof p.complete==="function"){p.complete(r);}}}function R(i,j,k){var l,m=p.proxy,o;O.href=i;i=O.href;l='html2canvas_'+(v++);k.callbackname=l;if(m.indexOf("?")>-1){m+="&";}else{m+="?";}m+='url='+encodeURIComponent(i)+'&callback='+l;o=M.createElement("script");X[l]=function(h){if(h.substring(0,6)==="error:"){k.succeeded=false;r.numLoaded++;r.numFailed++;w();}else{U(j,k);j.src=h;}X[l]=Y;try{delete  X[l];}catch(g){}o.parentNode.removeChild(o);o=null;delete  k.script;delete  k.callbackname;};o.setAttribute("type","text/javascript");o.setAttribute("src",m);k.script=o;X.document.body.appendChild(o);}function I(g,h){var i=X.getComputedStyle(g,h),j=i.content;if(j.substr(0,3)==='url'){t.loadImage(J.Util.parseBackgroundImage(j)[0].args[0]);}L(i.backgroundImage,g);}function f0(g){I(g,":before");I(g,":after");}function g0(g,h){var i=J.Generate.Gradient(g,h);if(i!==Y){r[g]={img:i,succeeded:true};r.numTotal++;r.numLoaded++;w();}}function H(g){return (g&&g.method&&g.args&&g.args.length>0);}function L(h,i){var j;J.Util.parseBackgroundImage(h).filter(H).forEach(function(g){if(g.method==='url'){t.loadImage(g.args[0]);}else if(g.method.match(/\-?gradient$/)){if(j===Y){j=J.Util.Bounds(i);}g0(g.value,j);}});}function d0(h){var i=false;try{C.Children(h).forEach(d0);}catch(g){}try{i=h.nodeType;}catch(g){i=false;C.log("html2canvas: failed to access some element's nodeType - Exception: "+g.message);}if(i===1||i===Y){f0(h);try{L(C.getCSS(h,'backgroundImage'),h);}catch(g){C.log("html2canvas: failed to get background-image - Exception: "+g.message);}L(h);}}function U(h,i){h.onload=function(){if(i.timer!==Y){X.clearTimeout(i.timer);}r.numLoaded++;i.succeeded=true;h.onerror=h.onload=null;w();};h.onerror=function(){if(h.crossOrigin==="anonymous"){X.clearTimeout(i.timer);if(p.proxy){var g=h.src;h=new Image();i.img=h;h.src=g;R(h.src,h,i);return ;}}r.numLoaded++;r.numFailed++;i.succeeded=false;h.onerror=h.onload=null;w();};}t={loadImage:function(g){var h,i;if(g&&r[g]===Y){h=new Image();if(g.match(/data:image\/.*;base64,/i)){h.src=g.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,'');i=r[g]={img:h};r.numTotal++;U(h,i);}else if(B(g)||p.allowTaint===true){i=r[g]={img:h};r.numTotal++;U(h,i);h.src=g;}else if(T&&!p.allowTaint&&p.useCORS){h.crossOrigin="anonymous";i=r[g]={img:h};r.numTotal++;U(h,i);h.src=g;}else if(p.proxy){i=r[g]={img:h};r.numTotal++;R(g,h,i);}}},cleanupDOM:function(h){var i,j;if(!r.cleanupDone){if(h&&typeof h==="string"){C.log("html2canvas: Cleanup because: "+h);}else{C.log("html2canvas: Cleanup after timeout: "+p.timeout+" ms.");}for(j in r){if(r.hasOwnProperty(j)){i=r[j];if(typeof i==="object"&&i.callbackname&&i.succeeded===Y){X[i.callbackname]=Y;try{delete  X[i.callbackname];}catch(g){}if(i.script&&i.script.parentNode){i.script.setAttribute("src","about:blank");i.script.parentNode.removeChild(i.script);}r.numLoaded++;r.numFailed++;C.log("html2canvas: Cleaned up failed img: '"+j+"' Steps: "+r.numLoaded+" / "+r.numTotal);}}}if(X.stop!==Y){X.stop();}else if(Z.execCommand!==Y){Z.execCommand("Stop",false);}if(Z.close!==Y){Z.close();}r.cleanupDone=true;if(!(h&&typeof h==="string")){w();}}},renderingDone:function(){if(K){X.clearTimeout(K);}}};if(p.timeout>0){K=X.setTimeout(t.cleanupDOM,p.timeout);}C.log('html2canvas: Preload starts: finding background-images');r.firstRun=true;d0(G);C.log('html2canvas: Preload: Finding images');for(F=0;F<Q;F+=1){t.loadImage(N[F].getAttribute("src"));}r.firstRun=false;C.log('html2canvas: Preload: Done.');if(r.numTotal===r.numLoaded){w();}return t;};J.Renderer=function(Q,O){function T(g,h){if(g==='children'){return -1;}else if(h==='children'){return 1;}else{return g-h;}}function K(F){var v=[],G;G=(function M(s){var C={};function t(h,i,j){var k=(i.zIndex.zindex==='auto')?0:Number(i.zIndex.zindex),l=h,m=i.zIndex.isPositioned,o=i.zIndex.isFloated,p={node:i},r=j;if(i.zIndex.ownStacking){l=p.context={children:[{node:i,children:[]}]};r=Y;}else if(m||o){r=p.children=[];}if(k===0&&j){j.push(p);}else{if(!h[k]){h[k]=[];}h[k].push(p);}i.zIndex.children.forEach(function(g){t(l,g,r);});}t(C,s);return C;})(F);function N(p){Object.keys(p).sort(T).forEach(function(i){var j=[],k=[],l=[],m=[];p[i].forEach(function(g){if(g.node.zIndex.isPositioned||g.node.zIndex.opacity<1){l.push(g);}else if(g.node.zIndex.isFloated){k.push(g);}else{j.push(g);}});(function o(h){h.forEach(function(g){m.push(g);if(g.children){o(g.children);}});})(j.concat(k,l));m.forEach(function(g){if(g.context){N(g.context);}else{v.push(g.node);}});});}N(G);return v;}function B(g){var h;if(typeof O.renderer==="string"&&J.Renderer[g]!==Y){h=J.Renderer[g](O);}else if(typeof g==="function"){h=g(O);}else{throw  new Error("Unknown renderer");}if(typeof h!=="function"){throw  new Error("Invalid renderer defined");}return h;}return B(O.renderer)(Q,O,Z,K(Q.stack),J);};J.Util.Support=function(l,m){function o(){var h=new Image(),i=m.createElement("canvas"),j=(i.getContext===Y)?false:i.getContext("2d");if(j===false){return false;}i.width=i.height=10;h.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{j.drawImage(h,0,0);i.toDataURL();}catch(g){return false;}J.Util.log('html2canvas: Parse: SVG powered rendering available');return true;}function p(){var g,h,i,j,k=false;if(m.createRange){g=m.createRange();if(g.getBoundingClientRect){h=m.createElement('boundtest');h.style.height="123px";h.style.display="block";m.body.appendChild(h);g.selectNode(h);i=g.getBoundingClientRect();j=i.height;if(j===123){k=true;}m.body.removeChild(h);}}return k;}return {rangeBounds:p(),svgRendering:l.svgRendering&&o()};};X.html2canvas=function(i,j){i=(i.length)?i:[i];var k,l,m={logging:false,elements:i,background:"#fff",proxy:null,timeout:0,useCORS:false,allowTaint:false,svgRendering:false,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:true,letterRendering:false,chinese:false,async:false,width:null,height:null,taintTest:true,renderer:"Canvas"};m=J.Util.Extend(j,m);J.logging=m.logging;m.complete=function(h){if(typeof m.onpreloaded==="function"){if(m.onpreloaded(h)===false){return ;}}J.Parse(h,m,function(g){if(typeof m.onparsed==="function"){if(m.onparsed(g)===false){return ;}}l=J.Renderer(g,m);if(typeof m.onrendered==="function"){m.onrendered(l);}});};X.setTimeout(function(){J.Preload(m);},0);return {render:function(g,h){return J.Renderer(g,J.Util.Extend(h,m));},parse:function(g,h){return J.Parse(g,J.Util.Extend(h,m));},preload:function(g){return J.Preload(J.Util.Extend(g,m));},log:J.Util.log};};X.html2canvas.log=J.Util.log;X.html2canvas.Renderer={Canvas:Y};J.Renderer.Canvas=function(t){t=t||{};var F=Z,v=[],G=Z.createElement("canvas"),M=G.getContext("2d"),N=J.Util,Q=t.canvas||F.createElement('canvas');function O(h,i){h.beginPath();i.forEach(function(g){h[g.name].apply(h,g['arguments']);});h.closePath();}function T(h){if(v.indexOf(h['arguments'][0].src)===-1){M.drawImage(h['arguments'][0],0,0);try{M.getImageData(0,0,1,1);}catch(g){G=F.createElement("canvas");M=G.getContext("2d");return false;}v.push(h['arguments'][0].src);}return true;}function K(h,i){switch(i.type){case "variable":h[i.name]=i['arguments'];break;case "function":switch(i.name){case "createPattern":if(i['arguments'][0].width>0&&i['arguments'][0].height>0){try{h.fillStyle=h.createPattern(i['arguments'][0],"repeat");}catch(g){N.log("html2canvas: Renderer: Error creating pattern",g.message);}}break;case "drawShape":O(h,i['arguments']);break;case "drawImage":if(i['arguments'][8]>0&&i['arguments'][7]>0){if(!t.taintTest||(t.taintTest&&T(i))){h.drawImage.apply(h,i['arguments']);}}break;default:h[i.name].apply(h,i['arguments']);}break;}}return function(i,j,k,l,m){var o=Q.getContext("2d"),p,r,s,C=i.stack;Q.width=Q.style.width=j.width||C.ctx.width;Q.height=Q.style.height=j.height||C.ctx.height;s=o.fillStyle;o.fillStyle=(N.isTransparent(i.backgroundColor)&&j.background!==Y)?j.background:i.backgroundColor;o.fillRect(0,0,Q.width,Q.height);o.fillStyle=s;l.forEach(function(h){o.textBaseline="bottom";o.save();if(h.transform.matrix){o.translate(h.transform.origin[0],h.transform.origin[1]);o.transform.apply(o,h.transform.matrix);o.translate(-h.transform.origin[0],-h.transform.origin[1]);}if(h.clip){o.beginPath();o.rect(h.clip.left,h.clip.top,h.clip.width,h.clip.height);o.clip();}if(h.ctx.storage){h.ctx.storage.forEach(function(g){K(o,g);});}o.restore();});N.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj");if(j.elements.length===1){if(typeof j.elements[0]==="object"&&j.elements[0].nodeName!=="BODY"){r=m.Util.Bounds(j.elements[0]);p=k.createElement('canvas');p.width=Math.ceil(r.width);p.height=Math.ceil(r.height);o=p.getContext("2d");o.drawImage(Q,r.left,r.top,r.width,r.height,0,0,r.width,r.height);Q=null;return p;}}return Q;};};})(window,document);
